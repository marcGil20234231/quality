import{a as L}from"./chunk-6YRVYL64.js";import{a as D}from"./chunk-YEKDV2CF.js";import{a as _}from"./chunk-ATP2JAFY.js";import{h as y,k as I}from"./chunk-4AEBGA5V.js";import{Ea as h,Ia as m,Ib as S,Jb as x,Nb as E,Pa as d,Qa as b,Sa as t,Ta as o,Ua as p,Za as g,cb as s,db as c,eb as C,kb as f,sa as v,va as n,za as u}from"./chunk-C2RAPJWX.js";import"./chunk-2NFLSA4Y.js";var w=r=>["/courses",r];function M(r,i){r&1&&(t(0,"div",12)(1,"div",13)(2,"span",14),s(3,"Loading..."),o()()())}function O(r,i){if(r&1&&(t(0,"div",15),s(1),o()),r&2){let e=g();n(),C(" ",e.error," ")}}function k(r,i){r&1&&(t(0,"div",16),s(1," You haven't enrolled in any courses yet. "),t(2,"a",17),s(3,"Browse courses"),o(),s(4," to get started! "),o())}function T(r,i){if(r&1&&(t(0,"div",18)(1,"div",19),p(2,"img",20),t(3,"div",7)(4,"h5",21),s(5),o(),t(6,"p",22),s(7),o(),t(8,"div",23),p(9,"div",24),o(),t(10,"a",25),s(11,"Continue Learning"),o()()()()),r&2){let e=i.$implicit,a=g();n(2),d("src",e.imageUrl,v)("alt",e.title),n(3),c(e.title),n(2),c(e.description),n(2),b("width",a.getCourseProgress(e.id),"%"),n(),d("routerLink",f(7,w,e.id))}}function P(r,i){if(r&1&&(t(0,"div",18)(1,"div",19),p(2,"img",20),t(3,"div",7)(4,"h5",21),s(5),o(),t(6,"p",22),s(7),o(),t(8,"a",26),s(9,"View Course"),o()()()()),r&2){let e=i.$implicit;n(2),d("src",e.imageUrl,v)("alt",e.title),n(3),c(e.title),n(2),c(e.description),n(),d("routerLink",f(5,w,e.id))}}var U=class r{constructor(i,e,a){this.courseService=i;this.enrollmentService=e;this.authService=a}enrolledCourses=[];recommendedCourses=[];isLoading=!0;error="";ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.isLoading=!0;let i=this.authService.getCurrentUser();if(!i){this.error="Please log in to view your dashboard",this.isLoading=!1;return}this.enrollmentService.getStudentEnrollments(i.id).subscribe({next:e=>{let a=e.map(l=>l.courseId);this.courseService.getCourses().subscribe({next:l=>{this.enrolledCourses=l.filter(F=>a.includes(F.id)),this.loadRecommendedCourses(),this.isLoading=!1},error:l=>{console.error("Error loading courses:",l),this.error="Failed to load courses",this.isLoading=!1}})},error:e=>{console.error("Error loading enrollments:",e),this.error="Failed to load enrollments",this.isLoading=!1}})}loadRecommendedCourses(){this.courseService.getCourses().subscribe({next:i=>{this.recommendedCourses=i.filter(e=>!this.enrolledCourses.some(a=>a.id===e.id)).slice(0,3)},error:i=>{console.error("Error loading recommended courses:",i)}})}getCourseProgress(i){return Math.floor(Math.random()*100)}static \u0275fac=function(e){return new(e||r)(u(_),u(L),u(D))};static \u0275cmp=h({type:r,selectors:[["app-user-dashboard"]],decls:20,vars:5,consts:[[1,"container","my-4"],[1,"mb-4"],["class","text-center my-5",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"card","mb-4"],[1,"card-header","bg-danger","text-white"],[1,"mb-0"],[1,"card-body"],["class","alert alert-info",4,"ngIf"],[1,"row","row-cols-1","row-cols-md-2","row-cols-lg-3","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"card"],[1,"text-center","my-5"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],[1,"alert","alert-danger"],[1,"alert","alert-info"],["routerLink","/courses"],[1,"col"],[1,"card","h-100"],[1,"card-img-top",2,"height","200px","object-fit","cover",3,"src","alt"],[1,"card-title"],[1,"card-text"],[1,"progress","mb-3"],[1,"progress-bar","bg-danger"],[1,"btn","btn-danger",3,"routerLink"],[1,"btn","btn-outline-danger",3,"routerLink"]],template:function(e,a){e&1&&(t(0,"div",0)(1,"h1",1),s(2,"My Dashboard"),o(),m(3,M,4,0,"div",2)(4,O,2,1,"div",3),t(5,"div",4)(6,"div",5)(7,"h5",6),s(8,"My Enrolled Courses"),o()(),t(9,"div",7),m(10,k,5,0,"div",8),t(11,"div",9),m(12,T,12,9,"div",10),o()()(),t(13,"div",11)(14,"div",5)(15,"h5",6),s(16,"Recommended Courses"),o()(),t(17,"div",7)(18,"div",9),m(19,P,10,7,"div",10),o()()()()),e&2&&(n(3),d("ngIf",a.isLoading),n(),d("ngIf",a.error&&!a.isLoading),n(6),d("ngIf",a.enrolledCourses.length===0),n(2),d("ngForOf",a.enrolledCourses),n(7),d("ngForOf",a.recommendedCourses))},dependencies:[E,S,x,I,y],encapsulation:2})};export{U as UserDashboardComponent};
