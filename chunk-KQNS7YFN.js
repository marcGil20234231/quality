import{b as M,c as s,d as z,e as w,g as A,j as D,m as R,s as j,u as B}from"./chunk-W5JIORLU.js";import{a as q}from"./chunk-SSB2MDWQ.js";import{e as x,g as I,k as N}from"./chunk-4AEBGA5V.js";import{Ea as C,Hb as y,Ia as l,Jb as S,Nb as E,Pa as m,Sa as o,Ta as r,Ua as c,Ya as h,Za as u,cb as d,db as T,eb as F,kb as f,va as a,za as p}from"./chunk-C2RAPJWX.js";import{a as g,b as _}from"./chunk-2NFLSA4Y.js";var v=e=>({"is-invalid":e});function k(e,n){e&1&&(o(0,"div"),d(1,"Name is required"),r())}function V(e,n){e&1&&(o(0,"div"),d(1,"Name must be at least 3 characters"),r())}function O(e,n){if(e&1&&(o(0,"div",22),l(1,k,2,0,"div",23)(2,V,2,0,"div",23),r()),e&2){let t=u();a(),m("ngIf",t.f.name.errors.required),a(),m("ngIf",t.f.name.errors.minlength)}}function L(e,n){e&1&&(o(0,"div"),d(1,"Email is required"),r())}function P(e,n){e&1&&(o(0,"div"),d(1,"Please enter a valid email"),r())}function U(e,n){if(e&1&&(o(0,"div",22),l(1,L,2,0,"div",23)(2,P,2,0,"div",23),r()),e&2){let t=u();a(),m("ngIf",t.f.email.errors.required),a(),m("ngIf",t.f.email.errors.email)}}function H(e,n){e&1&&(o(0,"div"),d(1,"Specialization is required"),r())}function J(e,n){if(e&1&&(o(0,"div",22),l(1,H,2,0,"div",23),r()),e&2){let t=u();a(),m("ngIf",t.f.specialization.errors.required)}}function K(e,n){e&1&&(o(0,"div"),d(1,"Biography is required"),r())}function Q(e,n){e&1&&(o(0,"div"),d(1,"Biography must be at least 50 characters"),r())}function W(e,n){if(e&1&&(o(0,"div",22),l(1,K,2,0,"div",23)(2,Q,2,0,"div",23),r()),e&2){let t=u();a(),m("ngIf",t.f.bio.errors.required),a(),m("ngIf",t.f.bio.errors.minlength)}}function X(e,n){e&1&&c(0,"span",24)}var G=class e{constructor(n,t,i,b){this.fb=n;this.teacherService=t;this.router=i;this.route=b;this.teacherForm=this.fb.group({name:["",[s.required,s.minLength(3)]],email:["",[s.required,s.email]],specialization:["",s.required],bio:["",[s.required,s.minLength(50)]]})}teacherForm;isEditMode=!1;submitted=!1;loading=!1;error="";get f(){return this.teacherForm.controls}ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n&&(this.isEditMode=!0,this.loadTeacher(+n))}loadTeacher(n){this.teacherService.getTeacher(n).subscribe({next:t=>{this.teacherForm.patchValue({name:t.name,email:t.email,specialization:t.specialization,bio:t.bio})},error:t=>{console.error("Error loading teacher:",t),this.router.navigate(["/teachers"])}})}onSubmit(){if(this.submitted=!0,this.teacherForm.invalid)return;this.loading=!0;let n=_(g({},this.teacherForm.value),{courses:[],createdAt:new Date,updatedAt:new Date});if(this.isEditMode){let t=this.route.snapshot.paramMap.get("id");t&&this.teacherService.updateTeacher(+t,n).subscribe({next:()=>{this.router.navigate(["/teachers"])},error:i=>{this.error=i.message||"Error updating teacher",this.loading=!1}})}else this.teacherService.createTeacher(n).subscribe({next:()=>{this.router.navigate(["/teachers"])},error:t=>{this.error=t.message||"Error creating teacher",this.loading=!1}})}onCancel(){this.router.navigate(["/teachers"])}static \u0275fac=function(t){return new(t||e)(p(j),p(q),p(I),p(x))};static \u0275cmp=C({type:e,selectors:[["app-teacher-form"]],decls:35,vars:21,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"card","shadow"],[1,"card-header","bg-danger","text-white"],[1,"mb-0"],[1,"card-body","p-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],["for","specialization",1,"form-label"],["type","text","id","specialization","formControlName","specialization",1,"form-control",3,"ngClass"],["for","bio",1,"form-label"],["id","bio","formControlName","bio","rows","4",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),d(6),r()(),o(7,"div",6)(8,"form",7),h("ngSubmit",function(){return i.onSubmit()}),o(9,"div",8)(10,"label",9),d(11,"Full Name"),r(),c(12,"input",10),l(13,O,3,2,"div",11),r(),o(14,"div",8)(15,"label",12),d(16,"Email"),r(),c(17,"input",13),l(18,U,3,2,"div",11),r(),o(19,"div",8)(20,"label",14),d(21,"Specialization"),r(),c(22,"input",15),l(23,J,2,1,"div",11),r(),o(24,"div",8)(25,"label",16),d(26,"Biography"),r(),c(27,"textarea",17),l(28,W,3,2,"div",11),r(),o(29,"div",18)(30,"button",19),h("click",function(){return i.onCancel()}),d(31,"Cancel"),r(),o(32,"button",20),l(33,X,1,0,"span",21),d(34),r()()()()()()()()),t&2&&(a(6),T(i.isEditMode?"Edit Teacher":"Add New Teacher"),a(2),m("formGroup",i.teacherForm),a(4),m("ngClass",f(13,v,i.submitted&&i.f.name.errors)),a(),m("ngIf",i.submitted&&i.f.name.errors),a(4),m("ngClass",f(15,v,i.submitted&&i.f.email.errors)),a(),m("ngIf",i.submitted&&i.f.email.errors),a(4),m("ngClass",f(17,v,i.submitted&&i.f.specialization.errors)),a(),m("ngIf",i.submitted&&i.f.specialization.errors),a(4),m("ngClass",f(19,v,i.submitted&&i.f.bio.errors)),a(),m("ngIf",i.submitted&&i.f.bio.errors),a(4),m("disabled",i.loading),a(),m("ngIf",i.loading),a(),F(" ",i.isEditMode?"Update":"Create"," "))},dependencies:[E,y,S,B,A,M,z,w,D,R,N],encapsulation:2})};export{G as TeacherFormComponent};
