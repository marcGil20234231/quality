import{b as h}from"./chunk-4AEBGA5V.js";import{J as s,M as a,R as p,k as l,v as o}from"./chunk-C2RAPJWX.js";import{a as i,b as u}from"./chunk-2NFLSA4Y.js";var d=class n{constructor(e){this.http=e}apiUrl="http://localhost:3000/resources";coursesUrl="http://localhost:3000/courses";handleError(e){return console.error("An error occurred:",e),e.status===404?l(()=>new Error("Resource not found")):l(()=>new Error("Something went wrong; please try again later."))}getResources(){return this.http.get(this.apiUrl).pipe(s(e=>console.log("Fetched resources:",e)),o(this.handleError))}getResource(e){let r=`${this.apiUrl}/${e}`;return this.http.get(r).pipe(s(t=>console.log("Fetched resource:",t)),o(this.handleError))}createResource(e){let r=u(i({},e),{createdAt:new Date().toISOString(),downloadCount:0});return this.http.post(this.apiUrl,r).pipe(s(t=>console.log("Created resource:",t)),o(this.handleError))}updateResource(e,r){let t=`${this.apiUrl}/${e}`;return this.http.put(t,r).pipe(s(c=>console.log("Updated resource:",c)),o(this.handleError))}deleteResource(e){let r=`${this.apiUrl}/${e}`;return this.http.delete(r).pipe(s(()=>console.log("Deleted resource with id:",e)),o(this.handleError))}searchResources(e){let r=encodeURIComponent(e),t=`${this.apiUrl}?q=${r}`;return this.http.get(t).pipe(s(c=>console.log("Search results:",c)),o(this.handleError))}filterByCategory(e){let r=`${this.apiUrl}?category=${e}`;return this.http.get(r).pipe(s(t=>console.log("Filtered resources:",t)),o(this.handleError))}incrementDownloadCount(e){return this.getResource(e).pipe(s(r=>{let t=u(i({},r),{downloadCount:(r.downloadCount||0)+1});return this.updateResource(e,t)}),o(this.handleError))}getCourses(){return this.http.get(this.coursesUrl)}static \u0275fac=function(r){return new(r||n)(p(h))};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})};export{d as a};
