import{b as I,c,d as E,e as w,g as F,j as L,m as N,s as T,u as R}from"./chunk-W5JIORLU.js";import{a as x}from"./chunk-YEKDV2CF.js";import{e as S,g as y}from"./chunk-4AEBGA5V.js";import{Ea as v,Hb as _,Ia as d,Jb as h,Nb as C,Pa as m,Sa as t,Ta as r,Ua as p,Ya as g,Za as u,cb as l,db as b,kb as f,va as o,za as s}from"./chunk-C2RAPJWX.js";import"./chunk-2NFLSA4Y.js";var q=e=>({"is-invalid":e});function G(e,n){if(e&1&&(t(0,"div",21),l(1),r()),e&2){let a=u();o(),b(a.error)}}function P(e,n){e&1&&(t(0,"div"),l(1,"Email is required"),r())}function j(e,n){e&1&&(t(0,"div"),l(1,"Please enter a valid email address"),r())}function B(e,n){if(e&1&&(t(0,"div",22),d(1,P,2,0,"div",23)(2,j,2,0,"div",23),r()),e&2){let a=u();o(),m("ngIf",a.f.email.errors.required),o(),m("ngIf",a.f.email.errors.email)}}function k(e,n){e&1&&(t(0,"div"),l(1,"Password is required"),r())}function M(e,n){if(e&1&&(t(0,"div",22),d(1,k,2,0,"div",23),r()),e&2){let a=u();o(),m("ngIf",a.f.password.errors.required)}}function V(e,n){e&1&&p(0,"span",24)}var A=class e{constructor(n,a,i,D){this.formBuilder=n;this.route=a;this.router=i;this.authService=D;this.loginForm=this.formBuilder.group({email:["",[c.required,c.email]],password:["",c.required]})}loginForm;loading=!1;submitted=!1;error="";get f(){return this.loginForm.controls}onSubmit(){this.submitted=!0,!this.loginForm.invalid&&(this.loading=!0,this.error="",this.authService.login(this.f.email.value,this.f.password.value).subscribe({next:()=>{let n=this.route.snapshot.queryParams.returnUrl||"/";this.router.navigate([n])},error:n=>{this.error=n.message||"Login failed. Please check your credentials.",this.loading=!1}}))}static \u0275fac=function(a){return new(a||e)(s(T),s(S),s(y),s(x))};static \u0275cmp=v({type:e,selectors:[["app-login"]],decls:29,vars:12,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-md-6","col-lg-5"],[1,"card","shadow"],[1,"card-header","bg-danger","text-white","text-center","py-3"],[1,"mb-0"],[1,"card-body","p-4"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"mb-4"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"form-control",3,"ngClass"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/auth/register",1,"text-danger"],[1,"alert","alert-danger"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(a,i){a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),l(6,"Login"),r()(),t(7,"div",6),d(8,G,2,1,"div",7),t(9,"form",8),g("ngSubmit",function(){return i.onSubmit()}),t(10,"div",9)(11,"label",10),l(12,"Email address"),r(),p(13,"input",11),d(14,B,3,2,"div",12),r(),t(15,"div",13)(16,"label",14),l(17,"Password"),r(),p(18,"input",15),d(19,M,2,1,"div",12),r(),t(20,"div",16)(21,"button",17),d(22,V,1,0,"span",18),l(23," Login "),r()()(),t(24,"div",19)(25,"p",5),l(26,"Don't have an account? "),t(27,"a",20),l(28,"Register"),r()()()()()()()()),a&2&&(o(8),m("ngIf",i.error),o(),m("formGroup",i.loginForm),o(4),m("ngClass",f(8,q,i.submitted&&i.f.email.errors)),o(),m("ngIf",i.submitted&&i.f.email.errors),o(4),m("ngClass",f(10,q,i.submitted&&i.f.password.errors)),o(),m("ngIf",i.submitted&&i.f.password.errors),o(2),m("disabled",i.loading),o(),m("ngIf",i.loading))},dependencies:[C,_,h,R,F,I,E,w,L,N],encapsulation:2})};export{A as LoginComponent};
